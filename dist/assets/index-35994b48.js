import{d as A,f as M,V as T,g as y,r as D,i as o,o as n,c as u,b as l,w as c,a as d,F as B,q as F,h as j,s as L,j as p,k as q,l as r,t as m,W as I}from"./index-e51ca14a.js";const U={class:"search-modal"},W=p(" 搜 索 "),G={key:0,class:"recent-wrap"},H={class:"title"},K=p(" 最近 "),P=p("清空"),Q={class:"recent-body"},X={key:1,class:"result-wrap"},Y=["onClick"],Z=["title"],se=A({name:"index",setup(ee){const i=M("recent-list",[]),O=q(),V=T(),v=y([]);let _=y([]);const g=e=>{e==null||e.forEach(t=>{var a;(a=t.children)!=null&&a.length?g(t.children):v.push(t)})},k=D(null),h=D(!1),w=()=>{h.value=!0,setTimeout(()=>{var e;return(e=k.value)==null?void 0:e.focus()})},C=e=>{h.value=!1,O.push({path:e.path}),i.value.some(t=>t.name===e.name)||i.value.push(e)};g(V.MenuList),_=y(JSON.parse(JSON.stringify(o(v))));const b=I(e=>{_.length=0;const t=v.filter(a=>a.title.indexOf(e.target.value)!==-1);_.push(...JSON.parse(JSON.stringify(o(t))))},500),x=e=>{e==="all"?i.value.length=0:i.value.splice(e,1)};return(e,t)=>{const a=r("icon-search"),S=r("a-button"),E=r("icon-history"),J=r("a-tag"),R=r("a-avatar"),$=r("a-empty"),z=r("a-modal");return n(),u("div",U,[l(S,{class:"search-btn",onClick:w,shape:"round"},{icon:c(()=>[l(a,{style:{color:"var(--color-text-1)"}})]),default:c(()=>[W]),_:1}),l(z,{visible:h.value,"onUpdate:visible":t[2]||(t[2]=s=>h.value=s),top:"150px",closable:!1,footer:!1,"modal-class":"my-modal","align-center":!1},{title:c(()=>[l(a,{size:"20",style:{color:"rgb(var(--primary-6))"}}),d("input",{ref_key:"input",ref:k,class:"search-input",type:"text",autofocus:"",placeholder:"输入关键词搜索",onInput:t[0]||(t[0]=(...s)=>o(b)&&o(b)(...s))},null,544)]),default:c(()=>[o(i).length?(n(),u("div",G,[d("div",H,[d("span",null,[l(E),K]),l(S,{size:"mini",type:"text",status:"danger",onClick:t[1]||(t[1]=s=>x("all"))},{default:c(()=>[P]),_:1})]),d("div",Q,[(n(!0),u(B,null,F(o(i),(s,f)=>(n(),L(J,{closable:"",onClick:N=>C(s),onClose:N=>x(f)},{default:c(()=>[p(m(s.title),1)]),_:2},1032,["onClick","onClose"]))),256))])])):j("",!0),o(_).length?(n(),u("div",X,[(n(!0),u(B,null,F(o(_),(s,f)=>(n(),u("div",{key:s,class:"result-item",onClick:N=>C(s)},[l(R,{class:"icon"},{default:c(()=>[p(m(f+1),1)]),_:2},1024),d("span",{class:"label",title:s.title},m(s.title),9,Z)],8,Y))),128))])):(n(),L($,{key:2}))]),_:1},8,["visible"])])}}});export{se as default};
